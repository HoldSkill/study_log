# MySQL面试题总结

##### 1.Mysql主从复制流程

主库:开启binlog线程，记录下所有改变了数据库数据的语句，记录到binlog中

从库：io线程-负责从master上面拉取binlog,放入自己的relaylog中，sql执行线程-执行relay log中的语句

#####  2. InnoDB和Myisam的区别

1.InnoDB支持事务，另一个不支持

2.InnoDB支持行级锁，另一个不支持

3.InnoDB支持MVCC,另一个不支持

4.InnoDB支持外键，另一个不支持

5.InnoDB不支持全文索引，另一个支持

##### 3.InnoDB引擎的特性

**插入缓冲**：对于非聚簇索引的插入和更新时，不是每一次都直接插入索引页，而是先放入内存中，如果该索引页在缓冲池中，直接插入，如果不在，就将其放入插入缓冲区，再以一定的频率和索引页合并

**二次写：**当刷新缓冲池脏页时，并不直接写到数据文件中，而是先拷贝至内存中的两次写缓冲区。接着从两次写缓冲区分两次写入磁盘共享表空间中，每次写入1MB，待完成后，再将两次写缓冲区写入数据文件

**自适应哈希索引**： InnoDB会根据访问的频率和模式，为热点页建立哈希索引，来提高查询效率。  自适应哈希索引是通过缓冲池的B+树页构建而来，因此建立速度很快，而且不需要对整张数据表建立哈希索引 

**预读**： 发起一个i/o请求，异步地在缓冲池中预先回迁若干页面，预计将会用到回迁的页面，这些请求在一个范围内引入所有页面

##### 4. varchar和char的区别，varchar(50)什么意思，int(20)什么意思

varchar是可变长度的字符类型，char是固定长度字符类型

varchar(50)表示最多存放50个字符

int(20)表示最多显示20个字符

##### 5. InnoDb有多少中日志

1.错误日志：记录出错信息

2.查询日志：记录所有对数据库的请求信息

3.慢查询日志：记录所有超过设置时间的查询语句

4.二进制日志：记录对数据库进行的所有操作

5.中继日志：用给从库恢复

6.事务日志：重做日志redo log 和回滚日志 undo log

##### 6.事务隔离级别

读未提交，读提交，可重复读，串行化 隔离级别越来越高，分别解决 脏读，不可重复读，幻读问题

##### 7.MySQL binlog的几种日志录入格式以及区别

Statement:每条修改数据的sql都记录在日志中

Row:不保存sql语句的上下文，仅保存哪条记录被修改和被修改成什么

Mixed: 两种格式的混合

##### 8.行级锁是基于什么实现的

是基于索引实现的，如果查找的条件不是索引类，那么就锁表

##### 9.drop delet truncate的区别

1.delete和truncate只删除数据不删除表结构，drop删除表结构

2.速度：drop>truncate>delete

3.delete是dml，事务提交才能生效

4.drop和truncate是ddl语句，操作立即生效

##### 10.乐观锁和悲观锁

悲观锁:假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作

乐观锁:假设不会发生并发冲突，只在提交时检查是否非凡数据完整性，实现：可以通过给数据加版本号的方法，更新的时候的版本号和查询时候的版本号不一致，更新失败

